<div class="modal" [class.show]="show" [style.display]="show ? 'block' : 'none'" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ participant ? 'Edit' : 'Add' }} Participant</h5>
        <button type="button" class="btn-close" (click)="onCancel()"></button>
      </div>
      
      <form (ngSubmit)="onSubmit()" #participantForm="ngForm">
        <div class="modal-body">
          <!-- Error message alert -->
          <div class="alert alert-danger" *ngIf="errorMessage" role="alert">
            {{ errorMessage }}
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="name" class="form-label">Name *</label>
              <input type="text" class="form-control" id="name" 
                     [(ngModel)]="formData.name" name="name" required
                     [class.is-invalid]="nameField.invalid && nameField.touched"
                     #nameField="ngModel">
              <div class="invalid-feedback" *ngIf="nameField.invalid && nameField.touched">
                Name is required
              </div>
            </div>
            
            <div class="col-md-6 mb-3">
              <label for="email" class="form-label">Email *</label>
              <input type="email" class="form-control" id="email" 
                     [(ngModel)]="formData.email" name="email" required email
                     [class.is-invalid]="emailField.invalid && emailField.touched"
                     #emailField="ngModel">
              <div class="invalid-feedback" *ngIf="emailField.invalid && emailField.touched">
                <span *ngIf="emailField.errors?.['required']">Email is required</span>
                <span *ngIf="emailField.errors?.['email']">Please enter a valid email address</span>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="whatsapp" class="form-label">Mobile Number (WhatsApp) *</label>
              <input type="tel" class="form-control" id="whatsapp" 
                     [(ngModel)]="formData.whatsapp" name="whatsapp" required
                     pattern="[+]?[0-9\s\-\(\)]+"
                     placeholder="+1234567890"
                     [class.is-invalid]="whatsappField.invalid && whatsappField.touched"
                     #whatsappField="ngModel">
              <div class="invalid-feedback" *ngIf="whatsappField.invalid && whatsappField.touched">
                <span *ngIf="whatsappField.errors?.['required']">Mobile number is required</span>
                <span *ngIf="whatsappField.errors?.['pattern']">Please enter a valid mobile number</span>
              </div>
            </div>
            
            <div class="col-md-6 mb-3">
              <label for="created" class="form-label">Created Date</label>
              <input type="date" class="form-control" id="created" 
                     [(ngModel)]="createdDateString" name="created">
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="linkedin" class="form-label">LinkedIn Profile</label>
              <input type="url" class="form-control" id="linkedin" 
                     [(ngModel)]="formData.linkedin" name="linkedin">
            </div>
            
            <div class="col-md-6 mb-3">
              <label for="github" class="form-label">GitHub Profile</label>
              <input type="url" class="form-control" id="github" 
                     [(ngModel)]="formData.github" name="github">
            </div>
          </div>
          
          <div class="mb-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="mb-0">Skills</h6>
              <button type="button" class="btn btn-sm btn-outline-primary" (click)="addSkill()">
                + Add Skill
              </button>
            </div>
            
            <div class="skills-container">
              <div *ngFor="let skill of formData.skills; let i = index" 
                   class="row align-items-center mb-2">
                <div class="col-md-6">
                  <input type="text" class="form-control" 
                         [(ngModel)]="skill.name" 
                         [name]="'skillName_' + i"
                         placeholder="Skill name">
                </div>
                <div class="col-md-4">
                  <input type="number" class="form-control" 
                         [(ngModel)]="skill.weightage" 
                         [name]="'skillWeightage_' + i"
                         min="0" max="10" 
                         placeholder="Weightage (0-10)">
                </div>
                <div class="col-md-2">
                  <button type="button" class="btn btn-sm btn-outline-danger" 
                          (click)="removeSkill(i)">
                    Ã—
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
          <button type="submit" class="btn btn-success" [disabled]="!participantForm.form.valid || isSubmitting">
            <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2" role="status"></span>
            {{ isSubmitting ? 'Saving...' : (participant ? 'Update' : 'Save') }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal-backdrop" [class.show]="show" *ngIf="show" (click)="onCancel()"></div>
